{"ast":null,"code":"import _objectSpread from\"D:\\\\Project\\\\stock_watcher_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Project\\\\stock_watcher_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Project\\\\stock_watcher_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Project\\\\stock_watcher_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Project\\\\stock_watcher_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Project\\\\stock_watcher_frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import InformationBox from\"./components/InformationBox\";import WatchBox from\"./components/WatchBox\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loading:true,data:{},endpoint:\"https://stock-market-web-scrapper.herokuapp.com/python\",updated:true};_this.fetchData=new Promise(function(res,rej){var xhr=new XMLHttpRequest();xhr.open(\"GET\",_this.state.endpoint);xhr.send();try{xhr.addEventListener(\"load\",function(){if(xhr.status===200){res({data:JSON.parse(xhr.responseText)});}else{rej({data:\"error\"});}});}catch(_unused){_this.setState(_objectSpread({},_this.state,{data:\"error\",loading:false}));}});return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.fetchData.then(function(res){_this2.setState(_objectSpread({},_this2.state,{data:res.data,loading:false}));}).catch(function(res){_this2.setState(_objectSpread({},_this2.state,{data:res.data,loading:false}));});setInterval(function(){_this2.fetchData.then(function(res){_this2.setState(_objectSpread({},_this2.state,{data:res.data}));}).catch(function(res){_this2.setState(_objectSpread({},_this2.state,{updated:false}));});},5000);}},{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,loading=_this$state.loading,updated=_this$state.updated,watchedStocks=_this$state.watchedStocks;return React.createElement(\"div\",null,React.createElement(InformationBox,{data:data,loading:loading,updated:updated}),React.createElement(WatchBox,{data:data,watchedStocks:watchedStocks}));}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["D:/Project/stock_watcher_frontend/src/App.js"],"names":["React","Component","InformationBox","WatchBox","App","state","loading","data","endpoint","updated","fetchData","Promise","res","rej","xhr","XMLHttpRequest","open","send","addEventListener","status","JSON","parse","responseText","setState","then","catch","setInterval","watchedStocks"],"mappings":"muBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,cAAP,KAA2B,6BAA3B,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,C,GAEqBC,CAAAA,G,mXACnBC,K,CAAQ,CACNC,OAAO,CAAE,IADH,CAENC,IAAI,CAAE,EAFA,CAGNC,QAAQ,CAAE,wDAHJ,CAINC,OAAO,CAAE,IAJH,C,OAORC,S,CAAY,GAAIC,CAAAA,OAAJ,CAAY,SAACC,GAAD,CAAMC,GAAN,CAAc,CACpC,GAAMC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,cAAJ,EAAZ,CACAD,GAAG,CAACE,IAAJ,CAAS,KAAT,CAAgB,MAAKX,KAAL,CAAWG,QAA3B,EACAM,GAAG,CAACG,IAAJ,GACA,GAAI,CACFH,GAAG,CAACI,gBAAJ,CAAqB,MAArB,CAA6B,UAAM,CACjC,GAAIJ,GAAG,CAACK,MAAJ,GAAe,GAAnB,CAAwB,CACtBP,GAAG,CAAC,CACFL,IAAI,CAAEa,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACQ,YAAf,CADJ,CAAD,CAAH,CAGD,CAJD,IAIO,CACLT,GAAG,CAAC,CAAEN,IAAI,CAAE,OAAR,CAAD,CAAH,CACD,CACF,CARD,EASD,CAAC,cAAM,CACN,MAAKgB,QAAL,kBAAmB,MAAKlB,KAAxB,EAA+BE,IAAI,CAAE,OAArC,CAA8CD,OAAO,CAAE,KAAvD,IACD,CACF,CAjBW,C,4FAmBQ,iBAClB,KAAKI,SAAL,CACGc,IADH,CACQ,SAAAZ,GAAG,CAAI,CACX,MAAI,CAACW,QAAL,kBAAmB,MAAI,CAAClB,KAAxB,EAA+BE,IAAI,CAAEK,GAAG,CAACL,IAAzC,CAA+CD,OAAO,CAAE,KAAxD,IACD,CAHH,EAIGmB,KAJH,CAIS,SAAAb,GAAG,CAAI,CACZ,MAAI,CAACW,QAAL,kBAAmB,MAAI,CAAClB,KAAxB,EAA+BE,IAAI,CAAEK,GAAG,CAACL,IAAzC,CAA+CD,OAAO,CAAE,KAAxD,IACD,CANH,EAQAoB,WAAW,CAAC,UAAM,CAChB,MAAI,CAAChB,SAAL,CACGc,IADH,CACQ,SAAAZ,GAAG,CAAI,CACX,MAAI,CAACW,QAAL,kBAAmB,MAAI,CAAClB,KAAxB,EAA+BE,IAAI,CAAEK,GAAG,CAACL,IAAzC,IACD,CAHH,EAIGkB,KAJH,CAIS,SAAAb,GAAG,CAAI,CACZ,MAAI,CAACW,QAAL,kBAAmB,MAAI,CAAClB,KAAxB,EAA+BI,OAAO,CAAE,KAAxC,IACD,CANH,EAOD,CARU,CAQR,IARQ,CAAX,CASD,C,uCAEQ,iBAC2C,KAAKJ,KADhD,CACCE,IADD,aACCA,IADD,CACOD,OADP,aACOA,OADP,CACgBG,OADhB,aACgBA,OADhB,CACyBkB,aADzB,aACyBA,aADzB,CAEP,MACE,gCACE,oBAAC,cAAD,EACE,IAAI,CAAEpB,IADR,CAEE,OAAO,CAAED,OAFX,CAGE,OAAO,CAAEG,OAHX,EADF,CAME,oBAAC,QAAD,EAAU,IAAI,CAAEF,IAAhB,CAAsB,aAAa,CAAEoB,aAArC,EANF,CADF,CAUD,C,iBA3D8B1B,S,SAAZG,G","sourcesContent":["import React, { Component } from \"react\";\r\nimport InformationBox from \"./components/InformationBox\";\r\nimport WatchBox from \"./components/WatchBox\";\r\n\r\nexport default class App extends Component {\r\n  state = {\r\n    loading: true,\r\n    data: {},\r\n    endpoint: \"https://stock-market-web-scrapper.herokuapp.com/python\",\r\n    updated: true\r\n  };\r\n\r\n  fetchData = new Promise((res, rej) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", this.state.endpoint);\r\n    xhr.send();\r\n    try {\r\n      xhr.addEventListener(\"load\", () => {\r\n        if (xhr.status === 200) {\r\n          res({\r\n            data: JSON.parse(xhr.responseText)\r\n          });\r\n        } else {\r\n          rej({ data: \"error\" });\r\n        }\r\n      });\r\n    } catch {\r\n      this.setState({ ...this.state, data: \"error\", loading: false });\r\n    }\r\n  });\r\n\r\n  componentDidMount() {\r\n    this.fetchData\r\n      .then(res => {\r\n        this.setState({ ...this.state, data: res.data, loading: false });\r\n      })\r\n      .catch(res => {\r\n        this.setState({ ...this.state, data: res.data, loading: false });\r\n      });\r\n\r\n    setInterval(() => {\r\n      this.fetchData\r\n        .then(res => {\r\n          this.setState({ ...this.state, data: res.data });\r\n        })\r\n        .catch(res => {\r\n          this.setState({ ...this.state, updated: false });\r\n        });\r\n    }, 5000);\r\n  }\r\n\r\n  render() {\r\n    const { data, loading, updated, watchedStocks } = this.state;\r\n    return (\r\n      <div>\r\n        <InformationBox\r\n          data={data}\r\n          loading={loading}\r\n          updated={updated}\r\n        ></InformationBox>\r\n        <WatchBox data={data} watchedStocks={watchedStocks}></WatchBox>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}